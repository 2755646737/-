<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è¶³çƒæ•°æ®ç®¡ç†ç³»ç»Ÿ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        /* ä¿æŒç»å…¸ç•Œé¢é£æ ¼ï¼ŒåªåšåŸºç¡€ç¾åŒ–å’Œä¼˜åŒ– */
        body { 
            background-color: #f8f9fa; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        .page-container { 
            max-width: 850px; 
            margin: 0 auto; 
            padding: 15px; 
            background: white; 
            min-height: 100vh;
            box-shadow: 0 0 10px rgba(0,0,0,0.05); 
        }
        
        /* å¯¼èˆª Tab æ ·å¼ä¼˜åŒ– */
        .nav-tabs .nav-link { 
            color: #495057; 
            cursor: pointer; 
            font-weight: 600; 
            border-radius: 8px 8px 0 0;
            padding: 10px 15px;
        }
        .nav-tabs .nav-link.active { 
            background-color: #0d6efd; 
            color: white; 
            border-color: #0d6efd; 
        }

        /* è¡¨å•ç¾åŒ– */
        .form-label { 
            font-weight: bold; 
            font-size: 0.9rem; 
            margin-bottom: 0.3rem;
            color: #333;
        }
        /* çƒé˜Ÿé€‰ä¸­åé¦ˆæ ·å¼ */
        .selected-team-feedback {
            font-weight: 500;
            color: #198754; /* Green color for confirmation */
            font-size: 1.1rem;
        }

        .form-control, .form-select {
            border-radius: 6px;
        }
        select.form-select[size] {
            height: auto;
        }

        /* æœç´¢ä¸‹æ‹‰åˆ—è¡¨æ ·å¼ */
        .autocomplete-list {
            position: absolute; 
            width: 100%; 
            z-index: 20; 
            max-height: 200px; 
            overflow-y: auto;
            border: 1px solid #ccc;
            border-radius: 0 0 6px 6px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .autocomplete-item {
            cursor: pointer;
            padding: 0.5rem 1rem;
            background-color: white;
            border-bottom: 1px solid #eee;
        }
        .autocomplete-item:hover {
            background-color: #f8f9fa;
        }
        .autocomplete-item.active {
             background-color: #0d6efd;
             color: white;
        }
        .list-group-item-action:active {
            background-color: #0a58ca;
            color: white;
        }


        /* æŒ‰é’®ç»Ÿä¸€é£æ ¼ */
        .btn-custom { 
            margin-bottom: 10px; 
            width: 100%; 
            font-weight: 500; 
            border-radius: 6px;
        }

        /* è¡¨æ ¼æ ·å¼ */
        .table-responsive { 
            background: white; 
            border-radius: 8px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
            overflow-y: auto;
            max-height: 60vh;
        }
        .table thead th {
            background-color: #343a40;
            color: white;
            position: sticky; 
            top: 0;
            z-index: 10;
        }
        .table td, .table th { 
            vertical-align: middle; 
            white-space: nowrap; 
            font-size: 0.85rem; 
            padding: 0.75rem 0.5rem; 
        }
        .table-striped > tbody > tr:nth-of-type(odd) > * {
            background-color: #f2f2f2;
        }

        /* æœç´¢æ ä¼˜åŒ– */
        .search-bar { 
            margin-bottom: 15px; 
            padding: 10px 0; 
            border-bottom: 1px solid #eee;
            background: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .delete-btn { 
            color: #dc3545; 
            cursor: pointer; 
            font-weight: bold; 
            text-decoration: underline; 
            font-size: 1rem;
        }
    </style>
</head>
<body>

<div id="app" class="page-container">
    
    <ul class="nav nav-tabs nav-fill mb-4">
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentPage === 1 }" @click="currentPage = 1">
                <i class="bi bi-pencil-square me-1"></i> æ•°æ®å½•å…¥
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" :class="{ active: currentPage === 2 }" @click="currentPage = 2">
                <i class="bi bi-table me-1"></i> æœ¬åœ°æ•°æ® ({{ filteredData.length }})
            </a>
        </li>
    </ul>

    <div v-show="currentPage === 1">
        <div class="row g-3">
            
            <div class="col-12">
                <label class="form-label">æ¯”èµ›æ—¥æœŸ <span class="text-danger">*</span></label>
                <input type="date" class="form-control" v-model="form.date" required>
            </div>

            <div class="col-12 position-relative">
                <label class="form-label">è”èµ›/èµ›äº‹ (å®æ—¶æœç´¢å¹¶é€‰æ‹©) <span class="text-danger">*</span></label>
                <input 
                    type="text" 
                    class="form-control" 
                    v-model="form.league" 
                    @focus="showLeagueResults = true" 
                    @blur="hideLeagueResultsSafely" 
                    placeholder="å¼€å§‹è¾“å…¥èµ›äº‹åç§°..."
                    required>

                <ul v-if="showLeagueResults && filteredLeagues.length > 0 && form.league.length > 0" 
                    class="list-group autocomplete-list">
                    <li v-for="league in filteredLeagues" :key="league" 
                        class="list-group-item list-group-item-action" 
                        @mousedown.prevent="selectLeague(league)">
                        {{ league }}
                    </li>
                </ul>

                <div class="form-text text-info mt-2" v-if="isKnownLeague">
                    **å½“å‰ï¼šèµ›äº‹å·²è¯†åˆ«**ï¼Œè¯·ä»ä¸‹æ–¹ä¸‹æ‹‰æ¡†é€‰æ‹©çƒé˜Ÿã€‚
                </div>
                <div class="form-text text-warning mt-2" v-else>
                    **å½“å‰ï¼šèµ›äº‹æœªè¯†åˆ«æˆ–æœªè¾“å…¥**ï¼Œè¯·æ‰‹åŠ¨è¾“å…¥ä¸‹æ–¹çƒé˜Ÿåç§°ã€‚
                </div>
            </div>

            <div class="col-6">
                <label class="form-label text-primary">ä¸»é˜Ÿ <span class="text-danger">*</span>
                    <span v-if="form.homeTeam" class="selected-team-feedback">
                        å·²é€‰: {{ form.homeTeam }}
                    </span>
                </label>
                <select v-if="isKnownLeague" class="form-select" v-model="form.homeTeam" size="8" required>
                    <option value="" disabled>é€‰æ‹©ä¸»é˜Ÿ</option>
                    <option v-for="team in currentTeams" :key="team" :value="team">{{ team }}</option>
                </select>
                <input v-else type="text" class="form-control" v-model="form.homeTeam" placeholder="è¾“å…¥ä¸»é˜Ÿå" required>
            </div>

            <div class="col-6">
                <label class="form-label text-danger">å®¢é˜Ÿ <span class="text-danger">*</span>
                    <span v-if="form.awayTeam" class="selected-team-feedback">
                         å·²é€‰: {{ form.awayTeam }}
                    </span>
                </label>
                <select v-if="isKnownLeague" class="form-select" v-model="form.awayTeam" size="8" required>
                    <option value="" disabled>é€‰æ‹©å®¢é˜Ÿ</option>
                    <option v-for="team in currentTeams" :key="team" :value="team">{{ team }}</option>
                </select>
                <input v-else type="text" class="form-control" v-model="form.awayTeam" placeholder="è¾“å…¥å®¢é˜Ÿå" required>
            </div>

            <div class="col-6">
                <label class="form-label">åŠåœºæ¯”åˆ† <span class="text-danger">*</span></label>
                <select class="form-select" v-model="form.halfScore" required>
                    <option v-for="score in scoreOptions" :key="'h'+score" :value="score">{{ score }}</option>
                </select>
            </div>

            <div class="col-6">
                <label class="form-label">å…¨åœºæ¯”åˆ† <span class="text-danger">*</span></label>
                <select class="form-select" v-model="form.fullScore" required>
                    <option v-for="score in scoreOptions" :key="'f'+score" :value="score">{{ score }}</option>
                </select>
            </div>

            <div class="col-4">
                <label class="form-label">è®©çƒ <span class="text-danger">*</span></label>
                <select class="form-select" v-model="form.handicap" required>
                    <option value="+1">+1</option>
                    <option value="-1">-1</option>
                </select>
            </div>

            <div class="col-4">
                <label class="form-label">ä¸Šç›˜èµ”ç‡ <span class="text-danger">*</span></label>
                <select class="form-select" v-model="form.upperOdds" required>
                    <option v-for="odd in oddsRange" :key="odd" :value="odd">{{ odd }}</option>
                </select>
            </div>

            <div class="col-4">
                <label class="form-label">èµ”ç‡å˜åŒ– <span class="text-danger">*</span></label>
                <input type="text" class="form-control" v-model="form.oddsChange" placeholder="è¾“å…¥åºåˆ—, å¦‚: 1120" required>
            </div>

        </div>

        <hr class="my-4">

        <div class="row">
            <div class="col-6"><button class="btn btn-primary btn-custom" @click="addData">
                <i class="bi bi-plus-lg me-1"></i> æ·»åŠ </button>
            </div>
            <div class="col-6"><button class="btn btn-secondary btn-custom" @click="clearLocalData">
                <i class="bi bi-trash3 me-1"></i> æ¸…ç©º (åˆ é™¤æ‰€æœ‰)</button>
            </div>
            <div class="col-6"><button class="btn btn-success btn-custom" @click="exportCSV">
                <i class="bi bi-file-earmark-spreadsheet me-1"></i> å¯¼å‡º CSV</button>
            </div>
            <div class="col-6"><button class="btn btn-info text-white btn-custom" @click="uploadToCloud">
                <i class="bi bi-cloud-upload me-1"></i> ä¸Šä¼ äº‘ç«¯</button>
            </div>
            <div class="col-12"><button class="btn btn-warning text-dark btn-custom" @click="downloadFromCloud">
                <i class="bi bi-cloud-download me-1"></i> äº‘ç«¯ä¸‹å‘ (è¦†ç›–)</button>
            </div>
        </div>
    </div>

    <div v-show="currentPage === 2">
        <div class="search-bar">
            <div class="input-group">
                <span class="input-group-text bg-white"><i class="bi bi-search text-primary"></i></span>
                <input type="text" class="form-control" v-model="searchQuery" 
                       placeholder="ç²¾å‡†æœç´¢ï¼šè¾“å…¥èµ”ç‡ æˆ– å˜åŒ–åºåˆ— (â‰¥3ä½å¼€å§‹æœç´¢)">
            </div>
            <div class="form-text text-muted ms-1" style="font-size: 12px;">
                å½“å‰è¾“å…¥é•¿åº¦: {{ searchQuery.length }}ã€‚åºåˆ—æœç´¢åœ¨ 3 ä½åæ¿€æ´»ã€‚
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>æ—¥æœŸ</th>
                        <th>èµ›äº‹</th>
                        <th>ä¸»é˜Ÿ</th>
                        <th>å®¢é˜Ÿ</th>
                        <th>åŠåœº</th>
                        <th>å…¨åœº</th>
                        <th>è®©çƒ</th>
                        <th>èµ”ç‡</th>
                        <th>å˜åŒ–</th>
                        <th class="text-center">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-if="filteredData.length === 0">
                        <td colspan="10" class="text-center py-5 text-muted">
                            <span v-if="searchQuery">æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆ"{{searchQuery}}"çš„æ•°æ®</span>
                            <span v-else>æš‚æ— æœ¬åœ°æ•°æ®</span>
                        </td>
                    </tr>
                    <tr v-for="(item, index) in filteredData" :key="index">
                        <td>{{ item.date.slice(5) }}</td>
                        <td>{{ item.league }}</td>
                        <td>{{ item.homeTeam }}</td>
                        <td>{{ item.awayTeam }}</td>
                        <td>{{ item.halfScore }}</td>
                        <td>{{ item.fullScore }}</td>
                        <td>{{ item.handicap }}</td>
                        <td><strong>{{ item.upperOdds }}</strong></td>
                        <td>{{ item.oddsChange }}</td>
                        <td class="text-center">
                            <span class="delete-btn" @click="deleteItem(item)">
                                <i class="bi bi-x-circle-fill"></i> åˆ é™¤
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>

<link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192x192.png">
  <meta name="apple-mobile-web-app-status-bar-style" content="#4299e1">
  <meta name="apple-mobile-web-app-title" content="èµ›äº‹æŸ¥è¯¢">

  <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="idb.js"></script>

<script>
    const { createApp, ref, computed, reactive, onMounted, watch } = Vue;

    // â˜… äº‘ç«¯é…ç½®åŒºåŸŸå¼€å§‹ â˜…
            // åœ¨è¿™é‡Œå®šä¹‰æ‚¨çš„äº‘ç«¯é…ç½®ï¼Œä¾‹å¦‚ API å¯†é’¥ã€è®¤è¯ URL ç­‰
            const cloudConfig = reactive({
                apiKey: "AIzaSyD2gY00krxzujQ6ol4lbShxOflMw48vDdc",
    authDomain: "zuqiushuju.firebaseapp.com",
    databaseURL: "https://zuqiushuju-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "zuqiushuju",
    storageBucket: "zuqiushuju.firebasestorage.app",
    messagingSenderId: "1033657621876",
    appId: "1:1033657621876:web:6eed7f50786f1cd703a021",
    measurementId: "G-JWF2CEWXL1"
            });
let firebaseApp = null;
        let dbRef = null;
        try {
            if (!firebase.apps.length) {
                firebaseApp = firebase.initializeApp(cloudConfig);
                dbRef = firebase.database().ref('matchDataFinal');
            }
        } catch (err) {
            console.error("Firebaseåˆå§‹åŒ–å¤±è´¥ ", err);
            alert("äº‘ç«¯åŠŸèƒ½ä¸å¯ç”¨ï¼š" + err.message);
        }
            // â˜… äº‘ç«¯é…ç½®åŒºåŸŸç»“æŸ â˜…

    createApp({
        setup() {
            // 1. çŠ¶æ€å®šä¹‰
            const currentPage = ref(1);
            const searchQuery = ref("");
            const localData = ref([]); 
            const showLeagueResults = ref(false); 
            let leagueWatchTimeout = null; 

            // â˜…â˜…â˜… å…¨çƒæ‰€æœ‰ä¸»è¦èµ›äº‹ã€è”èµ› T1/T2/T3 å®Œæ•´ä¿¡æ¯ â˜…â˜…â˜…
            const leagueData = {
                // --- 1. å›½é™…/å‹è°Šèµ› (å›½å®¶é˜Ÿ) ---
                "ä¸–ç•Œæ¯": ["å·´è¥¿å›½å®¶é˜Ÿ", "é˜¿æ ¹å»·å›½å®¶é˜Ÿ", "å¾·å›½å›½å®¶é˜Ÿ", "æ³•å›½å›½å®¶é˜Ÿ", "è‹±æ ¼å…°å›½å®¶é˜Ÿ", "è¥¿ç­ç‰™å›½å®¶é˜Ÿ", "è‘¡è„ç‰™å›½å®¶é˜Ÿ", "è·å…°å›½å®¶é˜Ÿ", "æ¯”åˆ©æ—¶å›½å®¶é˜Ÿ", "æ„å¤§åˆ©å›½å®¶é˜Ÿ", "ä¸­å›½å›½å®¶é˜Ÿ", "æ—¥æœ¬å›½å®¶é˜Ÿ", "éŸ©å›½å›½å®¶é˜Ÿ", "ç¾å›½å›½å®¶é˜Ÿ", "å¢¨è¥¿å“¥å›½å®¶é˜Ÿ"],
                "æ¬§æ´²æ¯": ["å¾·å›½å›½å®¶é˜Ÿ", "æ³•å›½å›½å®¶é˜Ÿ", "è‹±æ ¼å…°å›½å®¶é˜Ÿ", "è¥¿ç­ç‰™å›½å®¶é˜Ÿ", "è‘¡è„ç‰™å›½å®¶é˜Ÿ", "æ„å¤§åˆ©å›½å®¶é˜Ÿ", "æ¯”åˆ©æ—¶å›½å®¶é˜Ÿ", "è·å…°å›½å®¶é˜Ÿ", "å…‹ç½—åœ°äºšå›½å®¶é˜Ÿ", "ç‘å£«å›½å®¶é˜Ÿ", "åœŸè€³å…¶å›½å®¶é˜Ÿ"],
                "ç¾æ´²æ¯": ["é˜¿æ ¹å»·å›½å®¶é˜Ÿ", "å·´è¥¿å›½å®¶é˜Ÿ", "ä¹Œæ‹‰åœ­å›½å®¶é˜Ÿ", "å“¥ä¼¦æ¯”äºšå›½å®¶é˜Ÿ", "æ™ºåˆ©å›½å®¶é˜Ÿ", "ç§˜é²å›½å®¶é˜Ÿ", "ç¾å›½å›½å®¶é˜Ÿ", "å¢¨è¥¿å“¥å›½å®¶é˜Ÿ", "åŠ æ‹¿å¤§å›½å®¶é˜Ÿ"],
                "éæ´²æ¯": ["å¡å†…åŠ å°”å›½å®¶é˜Ÿ", "ç§‘ç‰¹è¿ªç“¦å›½å®¶é˜Ÿ", "åŸƒåŠå›½å®¶é˜Ÿ", "å°¼æ—¥åˆ©äºšå›½å®¶é˜Ÿ", "æ‘©æ´›å“¥å›½å®¶é˜Ÿ", "é˜¿å°”åŠåˆ©äºšå›½å®¶é˜Ÿ", "åŠ çº³å›½å®¶é˜Ÿ", "å–€éº¦éš†å›½å®¶é˜Ÿ", "çªå°¼æ–¯å›½å®¶é˜Ÿ"], // éæ´²æ¯
                "éº’éºŸæ¯": ["æ—¥æœ¬å›½å®¶é˜Ÿ", "éŸ©å›½å›½å®¶é˜Ÿ", "å·´è¥¿å›½å®¶é˜Ÿ", "æ¯”åˆ©æ—¶å›½å®¶é˜Ÿ", "æ™ºåˆ©å›½å®¶é˜Ÿ", "åŠ çº³å›½å®¶é˜Ÿ", "çªå°¼æ–¯å›½å®¶é˜Ÿ", "ç§˜é²å›½å®¶é˜Ÿ"], // éº’éºŸæ¯
                "ä¸–é¢„èµ›": ["ä¸­å›½å›½å®¶é˜Ÿ", "éŸ©å›½å›½å®¶é˜Ÿ", "æ—¥æœ¬å›½å®¶é˜Ÿ", "æ¾³å¤§åˆ©äºšå›½å®¶é˜Ÿ", "æ²™ç‰¹å›½å®¶é˜Ÿ", "ä¼Šæœ—å›½å®¶é˜Ÿ", "å·´è¥¿å›½å®¶é˜Ÿ", "é˜¿æ ¹å»·å›½å®¶é˜Ÿ", "è‹±æ ¼å…°å›½å®¶é˜Ÿ", "æ³•å›½å›½å®¶é˜Ÿ", "å¾·å›½å›½å®¶é˜Ÿ", "è¥¿ç­ç‰™å›½å®¶é˜Ÿ"],
                "å›½é™…å‹è°Šèµ›": ["ä¸­å›½å›½å®¶é˜Ÿ", "éŸ©å›½å›½å®¶é˜Ÿ", "æ—¥æœ¬å›½å®¶é˜Ÿ", "å·´è¥¿å›½å®¶é˜Ÿ", "é˜¿æ ¹å»·å›½å®¶é˜Ÿ", "è‹±æ ¼å…°å›½å®¶é˜Ÿ", "æ³•å›½å›½å®¶é˜Ÿ", "å¾·å›½å›½å®¶é˜Ÿ", "è¥¿ç­ç‰™å›½å®¶é˜Ÿ"],
                "ä¿±ä¹éƒ¨å‹è°Šèµ›": ["æ›¼åŸ", "çš‡é©¬", "å·´è¨", "æ‹œä»æ…•å°¼é»‘", "å°¤æ–‡å›¾æ–¯", "ACç±³å…°", "å·´é»åœ£æ—¥è€³æ›¼", "å›½é™…è¿ˆé˜¿å¯†", "åˆ©ç‰©æµ¦", "é˜¿æ£®çº³", "åˆ‡å°”è¥¿"],
                
                // --- 2. æ´²é™…ä¿±ä¹éƒ¨èµ›äº‹ (åŒ…å«è”åæ¯) ---
                "æ¬§å† ": ["çš‡å®¶é©¬å¾·é‡Œ", "æ›¼åŸ", "æ‹œä»æ…•å°¼é»‘", "å·´é»åœ£æ—¥è€³æ›¼", "å·´å¡ç½—é‚£", "é˜¿æ£®çº³", "å¤šç‰¹è’™å¾·", "å›½é™…ç±³å…°", "ACç±³å…°", "åˆ©ç‰©æµ¦", "å°¤æ–‡å›¾æ–¯", "é©¬ç«"],
                "æ¬§ç½—å·´": ["åˆ©ç‰©æµ¦", "å‹’æ²ƒåº“æ£®", "ç½—é©¬", "è¥¿æ±‰å§†è”", "äºšç‰¹å…°å¤§", "å¸ƒè±é¡¿", "å¼—èµ–å ¡", "é©¬èµ›", "è‘¡è„ç‰™ä½“è‚²"],
                "è§£æ”¾è€…æ¯": ["å¼—æ‹‰é—¨æˆˆ", "å¸•å°”æ¢…æ‹‰æ–¯", "åšå¡é’å¹´", "æ²³åºŠ", "åœ£ä¿ç½—", "ç±³å†…ç½—ç«æŠ€", "å¼—é²ç±³å«©å¡", "æ ¼é›·ç±³å¥¥"],
                "å—ç¾æ¯": ["å·´ä¼Šäºš", "åœ£æ´›ä¼¦ç´¢", "ç«æŠ€é˜Ÿ", "è¨æ–¯è²å°”å¾·", "åˆ©é©¬è”ç›Ÿ", "å›½æ°‘é˜Ÿ", "å¥¥æ—åŒ¹äºš", "æ³¢ç‰¹è¯ºå±±ä¸˜"], // äºŒçº§å—ç¾è”åæ¯
                "AFC å† å†›è”èµ›": ["ä¸Šæµ·æµ·æ¸¯", "å±±ä¸œæ³°å±±", "æ¨ªæ»¨æ°´æ‰‹", "è”šå±±HD", "æµ¦é¡¹é“äºº", "åˆ©é›…å¾—èƒœåˆ©", "åˆ©é›…å¾—æ–°æœˆ", "å‰è¾¾è”åˆ", "è‰¾å› ", "å¤šå“ˆè¨å¾·", "ä½©æ–¯æ™®åˆ©æ–¯"], // äºšæ´²ä¸€çº§
                "äºšè¶³è”æ¯": ["ä¸­å¤®æµ·å²¸æ°´æ‰‹", "ç§‘å¨ç‰¹SC", "é˜¿å¸ƒå“ˆ", "è‰¾å°”ç»´è¾¾", "æ‹‰ç“¦å°”", "é˜¿å¸ƒè¨å·´èµ«", "èƒ¡æ—¥æ–¯å¦ç‹¬ç«‹", "FCè‰¾å°”åŠ "], // äºšæ´²äºŒçº§è”åæ¯
                "ç¾å† æ¯": ["è¿ˆé˜¿å¯†å›½é™…", "æ´›æ‰çŸ¶FC", "è’™ç‰¹é›·", "å¸•ä¸˜å¡", "å“¥ä¼¦å¸ƒæœºå‘˜", "é˜¿ç‰¹æ‹‰æ–¯", "å¡”æ ¼é›·æ–¯", "å¥¥å…°å¤šåŸ", "å¢¨è¥¿å“¥ç¾æ´²"], // ä¸­åŒ—ç¾ä¸€çº§

                // --- 3. å›½å†…æ¯èµ› (ä¸»è¦å¼ºå›½) ---
                "è‹±è¶³æ€»æ¯": ["æ›¼åŸ", "é˜¿æ£®çº³", "åˆ©ç‰©æµ¦", "åˆ‡å°”è¥¿", "æ›¼è”", "çƒ­åˆº", "çº½å¡æ–¯å°”è”", "è±æ–¯ç‰¹åŸ", "ä¼Šæ™®æ–¯ç»´å¥‡", "æœ´èŒ¨èŒ…æ–¯", "åšå°”é¡¿", "é›·ä¸"], 
                "è‹±è”èµ›æ¯": ["æ›¼åŸ", "é˜¿æ£®çº³", "åˆ©ç‰©æµ¦", "åˆ‡å°”è¥¿", "æ›¼è”", "çƒ­åˆº", "çº½å¡æ–¯å°”è”", "è¥¿æ±‰å§†è”", "æ°´æ™¶å®«", "å¸ƒè±é¡¿", "è±æ–¯ç‰¹åŸ", "ä¼Šæ™®æ–¯ç»´å¥‡"],
                "è‹±é”¦èµ›": ["æœ´èŒ¨èŒ…æ–¯", "å¾·æ¯”éƒ¡", "ç‰›æ´¥è”", "åšå°”é¡¿", "å½¼å¾—ä¼¯å‹’è”", "å·´æ©æ–¯åˆ©", "é›·ä¸", "åˆ‡å°”è¥¿U21", "åˆ©ç‰©æµ¦U21", "æ›¼åŸU21"], 
                "è¥¿ç­ç‰™å›½ç‹æ¯": ["çš‡é©¬", "å·´è¨", "é©¬ç«", "æ¯•å°”å·´é„‚", "çš‡å®¶ç¤¾ä¼š", "ç“¦ä¼¦è¥¿äºš", "å¡ç»´åˆ©äºš", "èµ«ç½—çº³", "èµ«å¡”è´¹", "æ‹‰ç§‘é²å°¼äºš", "é©¬æ‹‰åŠ "],
                "å¾·å›½æ¯": ["æ‹œä»æ…•å°¼é»‘", "å¤šç‰¹è’™å¾·", "å‹’æ²ƒåº“æ£®", "è±æ¯”é”¡", "æ–¯å›¾åŠ ç‰¹", "æ³•å…°å…‹ç¦", "æ±‰å ¡", "æ²™å°”å…‹04", "ä¸ä¼¦ç‘å…‹", "å¾·ç´¯æ–¯é¡¿", "åœ£ä¿åˆ©", "åŸºå°”"],
                "æ„å¤§åˆ©æ¯": ["å›½é™…ç±³å…°", "ACç±³å…°", "å°¤æ–‡å›¾æ–¯", "é‚£ä¸å‹’æ–¯", "ç½—é©¬", "æ‹‰é½å¥¥", "ä½›ç½—ä¼¦è¨", "äºšç‰¹å…°å¤§"],
                "æ³•å›½æ¯": ["å·´é»åœ£æ—¥è€³æ›¼", "æ‘©çº³å“¥", "é‡Œæ˜‚", "é©¬èµ›", "é‡Œå°”", "é›·æ©", "æ¬§å¡å°”", "æ˜‚çƒ­"],
                "æ²™ç‰¹å›½ç‹æ¯": ["åˆ©é›…å¾—æ–°æœˆ", "åˆ©é›…å¾—èƒœåˆ©", "å‰è¾¾è”åˆ", "å‰è¾¾å›½æ°‘", "è¾¾é©¬å…‹", "è´¹å“ˆ", "å¸ƒèµ–ä»£åˆä½œ"], 

                // --- 4. æ¬§æ´²è”èµ› (T1/T2/T3 å®Œæ•´è¦†ç›– + çƒ­åº¦è¡¥å……) ---
                // è‹±å›½ (T1-T3)
                "è‹±è¶…": ["æ›¼åŸ", "é˜¿æ£®çº³", "åˆ©ç‰©æµ¦", "é˜¿æ–¯é¡¿ç»´æ‹‰", "çƒ­åˆº", "åˆ‡å°”è¥¿", "çº½å¡æ–¯å°”è”", "è¥¿æ±‰å§†è”", "æ°´æ™¶å®«", "å¸ƒè±é¡¿", "ä¼¯æ©èŒ…æ–¯", "å¯Œå‹’å§†", "ç‹¼é˜Ÿ", "åŸƒå¼—é¡¿", "è¯ºä¸æ±‰æ£®æ—", "å¸ƒä¼¦ç‰¹ç¦å¾·", "ä¼Šæ™®æ–¯ç»´å¥‡", "è±æ–¯ç‰¹åŸ", "å—å®‰æ™®é¡¿", "ä¼¯æ©åˆ©"], 
                "è‹±å† ": ["æ™®é›·æ–¯é¡¿", "ç±³å¾·å°”æ–¯å ¡", "æ™®åˆ©èŒ…æ–¯", "æ²ƒç‰¹ç¦å¾·", "æ–¯æ‰˜å…‹åŸ", "æ–¯æ—ºè¥¿", "ä¼¯æ˜ç¿°åŸ", "è°¢å‘¨ä¸‰", "ç½—ç‘Ÿå‹’å§†", "å¾·æ¯”éƒ¡", "æœ´èŒ¨èŒ…æ–¯", "å¡è¿ªå¤«åŸ", "å¸ƒé‡Œæ–¯æ‰˜åŸ", "èµ«å°”åŸ", "è¯ºç»´å¥‡", "æ¡‘å¾·å…°", "å¥³ç‹å…¬å›­å·¡æ¸¸è€…", "å¸ƒè±å…‹æœ¬"], 
                "è‹±ç”²": ["æœ´èŒ¨èŒ…æ–¯", "å¾·æ¯”éƒ¡", "ç‰›æ´¥è”", "åšå°”é¡¿", "å½¼å¾—ä¼¯å‹’è”", "å·´æ©æ–¯åˆ©", "é›·ä¸", "å¸ƒè±å…‹æµ¦", "æŸ¥å°”é¡¿", "ç»´å†ˆç«æŠ€", "æ—è‚¯åŸ", "ä¼¯é¡¿"], 
                
                // è¥¿ç­ç‰™ (T1-T3)
                "è¥¿ç”²": ["çš‡é©¬", "å·´è¨", "èµ«ç½—çº³", "é©¬ç«", "æ¯•å°”å·´é„‚", "çš‡å®¶ç¤¾ä¼š", "çš‡å®¶è´è’‚æ–¯", "æ¯”åˆ©äºšé›·äºšå°”", "ç“¦ä¼¦è¥¿äºš", "èµ«å¡”è´¹", "å¥¥è¨è‹çº³", "å¡å°”å¡”", "å¡ç»´åˆ©äºš", "é©¬æ´›å¡", "æ‹‰æ–¯å¸•å°”é©¬æ–¯", "å·´åˆ—å¡è¯º", "é˜¿æ‹‰ç»´æ–¯", "è±åŠ å†…æ–¯", "å·´æ‹‰å¤šåˆ©å¾·", "è¥¿ç­ç‰™äºº"], 
                "è¥¿ä¹™": ["è±ä¸‡ç‰¹", "å¥¥ç»´å¤š", "è¨æ‹‰æˆˆè¨", "ç‰¹å†…é‡Œè´¹", "å¡å¡”èµ«çº³", "åŸƒå°”åˆ‡", "é˜¿å°”ç“¦å¡ç‰¹", "å¸ƒå°”æˆˆæ–¯", "ç±³å…°å¾·æ–¯", "æ¡‘å¦å¾·ç«æŠ€"], 
                "è¥¿åç”²": ["æ‹‰ç§‘é²å°¼äºš", "å·´å¡ç½—é‚£ç«æŠ€", "ç§‘å°”å¤šç“¦", "é©¬æ‹‰åŠ ", "æ¢…é‡Œè¾¾", "çš‡å®¶é©¬å¾·é‡Œå¡æ–¯è’‚åˆ©äºš", "çš‡å®¶ç¤¾ä¼šB"], 
                
                // æ„å¤§åˆ© (T1-T3)
                "æ„ç”²": ["å›½é™…ç±³å…°", "ACç±³å…°", "å°¤æ–‡å›¾æ–¯", "äºšç‰¹å…°å¤§", "åšæ´›å°¼äºš", "ç½—é©¬", "æ‹‰é½å¥¥", "ä½›ç½—ä¼¦è¨", "éƒ½çµ", "é‚£ä¸å‹’æ–¯", "çƒ­é‚£äºš", "è’™æ‰", "ç»´ç½—çº³", "è±åˆ‡", "ä¹Œè¿ªå†…æ–¯", "å¡åˆ©äºšé‡Œ", "ç§‘è«", "å¸•å°”é©¬", "å¨å°¼æ–¯", "æ©æ³¢åˆ©"], 
                "æ„ä¹™": ["å·´å‹’è«", "å…‹é›·è«å†…å¡", "å¨å°¼æ–¯", "å¸•å°”é©¬", "æ¡‘æ™®å¤šåˆ©äºš", "å·´é‡Œ", "æ–¯ä½©é½äºš", "å¸ƒé›·è¥¿äºš", "ç§‘æ£®æ‰", "åˆ‡å¡çº³"], 
                "æ„ä¸™": ["å¡å¡”å°¼äºš", "ç¦è´¾", "ä½©æ–¯å¡æ‹‰", "æ©æ³°æ‹‰", "é˜¿éŸ¦åˆ©è¯º", "ç»´ç´å¯Ÿ", "åˆ‡å¡çº³", "è´å†…æ–‡æ‰˜", "å…‹ç½—æ‰˜å†…", "ç‰¹æ‹‰çº³"], 

                // å¾·å›½ (T1-T3)
                "å¾·ç”²": ["å‹’æ²ƒåº“æ£®", "æ–¯å›¾åŠ ç‰¹", "æ‹œä»æ…•å°¼é»‘", "å¤šç‰¹è’™å¾·", "è±æ¯”é”¡", "æ³•å…°å…‹ç¦", "éœèŠ¬æµ·å§†", "å¼—èµ–å ¡", "å¥¥æ ¼æ–¯å ¡", "äº‘è¾¾ä¸è±æ¢…", "æ²ƒå°”å¤«æ–¯å ¡", "ç¾å› èŒ¨", "é—¨å…´æ ¼æ‹‰å¾·å·´èµ«", "æŸæ—è”åˆ", "æ³¢é¸¿", "åœ£ä¿åˆ©", "åŸºå°”", "æµ·ç™»æµ·å§†"], 
                "å¾·ä¹™": ["æœå¡å°”å¤šå¤«", "æ±‰å ¡", "å¡å°”æ–¯é²å„", "æ±‰è¯ºå¨96", "å¸•å¾·åšæ©", "æŸæ—èµ«å¡”", "æ²™å°”å…‹04", "çº½ä¼¦å ¡", "å‡¯æ³½æ–¯åŠ³æ»•", "é©¬æ ¼å¾·å ¡", "åŸƒå°”å¼—æ–¯è´æ ¼", "ç½—æ–¯æ‰˜å…‹", "ä¸ä¼¦ç‘å…‹"], 
                "å¾·ä¸™": ["ä¹Œå°”å§†", "é›…æ©é›·æ ¹æ–¯å ¡", "æ˜æ–¯ç‰¹æ™®é²å£«", "å¾·ç´¯æ–¯é¡¿", "æ¯”å‹’è´¹å°”å¾·", "æ…•å°¼é»‘1860", "å› æˆˆå°”æ–½å¡”ç‰¹", "è¨å°”å¸ƒå•è‚¯"], 

                // æ³•å›½ (T1-T3)
                "æ³•ç”²": ["å·´é»åœ£æ—¥è€³æ›¼", "æ‘©çº³å“¥", "å¸ƒé›·æ–¯ç‰¹", "é‡Œå°”", "å°¼æ–¯", "æœ—æ–¯", "é‡Œæ˜‚", "é©¬èµ›", "é›·æ©", "å…°æ–¯", "å›¾å¢å…¹", "è’™å½¼åˆ©åŸƒ", "æ–¯ç‰¹æ‹‰æ–¯å ¡", "å‹’é˜¿å¼—å°”", "æ¬§å¡å°”", "æ˜‚çƒ­", "æ¢…æ–¯", "å—ç‰¹"], 
                "æ³•ä¹™": ["æ¬§å¡å°”", "æ˜‚çƒ­", "åœ£åŸƒè’‚å®‰", "å·´é»FC", "å¡æ˜‚", "æ ¼å‹’è¯ºå¸ƒå°”", "æ³¢å°”å¤š", "äºšçœ ", "é˜¿é›…å…‹è‚–", "ç‰¹é²ç“¦"], 
                "æ³•ä¸™": ["å—é”¡", "ç¬¬æˆ", "æ²™æ‰˜é²", "å°¼å§†", "å‹’èŠ’", "çº¢æ˜Ÿ", "å‡¡å°”èµ›", "å¢æ˜‚"], 

                // è·å…°/è‘¡è„ç‰™/ä¿„ç½—æ–¯ (T1-T3)
                "è·ç”²": ["åŸƒå› éœæ¸©", "è´¹è€¶è¯ºå¾·", "ç‰¹æ¸©ç‰¹", "é˜¿è´¾å…‹æ–¯", "é˜¿å°”å…‹é©¬å°”", "å¥ˆæ¢…äº¨", "ä¹Œå¾·å‹’æ”¯", "æµ·ä¼¦èŠ¬", "é¹¿ç‰¹ä¸¹æ–¯å·´è¾¾", "ç¦å›¾çº³é”¡å¡”å¾·"], 
                "è·ä¹™": ["æµ·ç‰™", "å¸ƒé›·è¾¾", "åŸƒé—¨", "ç½—è¾¾JC", "é©¬æ–¯ç‰¹é‡Œèµ«ç‰¹", "å¤šå¾·å‹’æ”¯", "åå¸ƒå°”", "èŠ¬æ´›"], 
                "è·ä¸™": ["é˜¿å…‹é©¬å°”é’å¹´é˜Ÿ", "é˜¿è´¾å…‹æ–¯é’å¹´é˜Ÿ", "æ ¼ç½—å®æ ¹é’å¹´é˜Ÿ", "å®¹ä¹Œå¾—å‹’æ”¯", "èŠ¬å…°é˜Ÿ", "æ–¯å·´è‚¯å ¡"], 

                "è‘¡è¶…": ["è‘¡è„ç‰™ä½“è‚²", "æœ¬è²å¡", "æ³¢å°”å›¾", "å¸ƒæ‹‰åŠ ", "å‰é©¬è‰¯æ–¯", "é‡Œå¥¥é˜¿ç»´", "æ³•é©¬åˆ©åº·", "å¡è¨çš®äºš", "ç»´æ³½æ‹‰", "é˜¿ç½—å¡"], 
                "è‘¡ç”²": ["é©¬å¾·æ‹‰", "é˜¿ç»´æ–¯", "ç§‘ç“¦çš®è€¶è¾¾", "ä½©çº³è²å°”", "è±ç´¢æ–¯", "é€šå¾·æ‹‰", "è´¹ä¼¦æ–¯", "åœ£å…‹æ‹‰æ‹‰"], 
                "è‘¡ä¹™": ["ç§‘ç“¦çš®è€¶è¾¾", "å¥¥åˆ©ç»´æ‹‰", "é›·å…‹æ–¯", "æ´›é›·ä»€", "å¢è¥¿å¡”å°¼äºš", "å¸ƒæ‹‰åŠ äºŒé˜Ÿ"], 

                "ä¿„è¶…": ["æ³½å°¼ç‰¹", "å…‹æ‹‰æ–¯è¯ºè¾¾å°”", "è«æ–¯ç§‘è¿ªçº³æ‘©", "è«æ–¯ç§‘ä¸­å¤®é™†å†›", "æ–¯å·´è¾¾å…‹", "ç«è½¦å¤´", "ç½—æ–¯æ‰˜å¤«", "ç´¢å¥‘"],
                "ä¿„ç”²": ["å–€å±±çº¢å®çŸ³", "å›¾æ‹‰å…µå·¥å‚", "ä¹Œæ‹‰å°”", "ä¸‹è¯ºå¤«å“¥ç½—å¾·", "é˜¿å…‹ä¼¦æ‰˜åˆ©äºšè’‚", "å¶å°¼å¡", "æµ·å‚å´´å…‰èƒ½"], 
                "ä¿„ä¹™": ["åˆ‡åˆ©äºšå®¾æ–¯å…‹", "ç§‹æ˜", "å…‹æ‹‰æ–¯è¯ºè¾¾å°”äºŒé˜Ÿ", "ä¹Œæ‹‰å°”äºŒé˜Ÿ", "è«æ–¯ç§‘é±¼é›·äºŒé˜Ÿ", "æ–°è¥¿ä¼¯åˆ©äºš", "ä¹Œæ³•"], 
                
                // â˜…â˜…â˜… çƒ­åº¦è”èµ›è¡¥å…… (NEW) â˜…â˜…â˜…
                "æ¯”ç”²": ["å¸ƒé²æ—¥", "æ ¹ç‰¹", "å®‰å¾·è±èµ«ç‰¹", "æ ‡å‡†åˆ—æ—¥", "äº¨å…‹", "å®‰ç‰¹å«æ™®", "æ²™å‹’é²ç“¦", "ç§‘ç‰¹èµ–å…‹", "æ¢…èµ«ä¼¦", "æ¬§æœ¬", "åœ£å›¾å°”ç™»"], // Belgium T1
                "æ¯”ä¹™": ["è´å¼—ä¼¦", "éŸ¦æ–¯ç‰¹æ´›", "æ‘©æ–¯å…‹ä¼¦", "æ´›é»˜å°”", "å¥¥å¾·èµ«ç»´å°”", "åœ£å‰ç½—æ–¯", "ç§‘ç‰¹èµ–å…‹", "åˆ—æ—¥", "ä¸¹å¾·å°”", "å¸ƒæ‹‰", "ç»´å°”è±", "å®‰å¾·è±èµ«ç‰¹U23"], // Belgium T2
                "åœŸè¶…": ["åŠ æ‹‰å¡”è¨é›·", "è´¹å†…å·´åˆ‡", "è´è¥¿å…‹å¡”æ–¯", "ç‰¹æ‹‰å¸ƒå®—", "ä¼Šæ–¯å¦å¸ƒå°”", "é˜¿è¾¾çº³", "é”¡ç“¦æ–¯ä½“è‚²", "å¼€å¡åˆ©", "ç§‘å°¼äºšä½“è‚²", "åŠ æµå®‰æ³°æ™®", "å“ˆå¡”æ–¯å ¡"], // Turkey T1
                "å¸Œè…Šè¶…": ["å¥¥æ—åŒ¹äºšç§‘æ–¯", "å¸•çº³è¾›å¥ˆç§‘æ–¯", "é›…å…¸AEK", "å¡è¨æ´›å°¼åŸº", "é˜¿é‡Œæ–¯", "é˜¿æ–¯ç‰¹æ‹‰æ–¯", "æ²ƒæ´›æ–¯", "æ‹‰ç±³äºš", "é˜¿ç‰¹ç½—ç±³æ‰˜æ–¯", "å¸•çº³æ‰˜åˆ©ç§‘æ–¯"], // Greece T1
                "ç‘å£«è¶…": ["ä¼¯å°”å°¼å¹´è½»äºº", "å·´å¡å°”", "è‹é»ä¸–", "å¡å°”ç»´ç‰¹", "å¢å¡æ©", "æ´›æ¡‘ä½“è‚²", "è‰èœ¢", "åœ£åŠ ä»‘", "æ¸©ç‰¹å›¾å°”", "é”¡æ˜‚"], // Switzerland T1
                "æŒªè¶…": ["è«å°”å¾·", "åšå¾·é—ªè€€", "ç½—æ£®åšæ ¼", "ç»´äº¬", "ç‰¹ç½—å§†ç‘Ÿ", "è¨å°”æ™®æ–¯å ¡", "å¥¥å¾·", "æ–¯å¡”è´å…‹", "ç“¦å‹’ä¼¦åŠ ", "åˆ©å‹’æ–¯ç‰¹ç½—å§†", "æµ·äºæ ¼æ¾"], // Norway T1
                "æŒªç”²": ["å¸ƒå…°", "æ–¯å¡”ç‰¹", "æ¡‘å†…æ–¯", "å­”æ–¯æ¸©æ ¼", "æ‹‰å†…å§†", "ç‰¹ç½—å§†æ–¯è¾¾ä¼¦", "å¥¥å‹’æ¾", "ç±³çº¦æ©è¾¾ä¼¦", "ç´¢æ ¼æ©è¾¾å°”", "å…°èµ«å§†"], // Norway T2
                "ç‘å…¸è¶…": ["é©¬å°”é»˜", "å“¥å¾·å ¡", "AIK", "ä½åŠ é¡¿æ–¯", "å“ˆé©¬æ¯”", "èµ«æ ¹", "åŸƒå°”å¤«æ–¯å ¡", "åŒ—é›ªå¹³", "å¤©ç‹¼æ˜Ÿ", "å¡å°”é©¬", "ä»£æ ¼ç¦ä»€", "éŸ¦æ–¯ç‰¹ç½—æ–¯"], // Sweden T1
                "ç‘å…¸ç”²": ["èµ«å°”è¾›å ¡", "å„å‹’å¸ƒé²", "æ³•å°”è‚¯å ¡", "å¥¥æ–¯å¡å°”æ–¯æ¸¯", "è¾¾å°”åº“å°”å¾·", "å¸ƒè±å…‹æ ¼", "å…°æ–¯ç§‘ç½—çº³", "å°¤å°”åŠ ç™»", "å„æ–¯ç‰¹ä»€", "ç‰¹é›·å‹’å ¡", "å»¶é›ªå¹³"], // Sweden T2

                // --- 5. äºšæ´²è”èµ› (T1/T2/T3 å…¨è¦†ç›–) ---
                // æ²™ç‰¹
                "æ²™ç‰¹è”": ["åˆ©é›…å¾—æ–°æœˆ", "åˆ©é›…å¾—èƒœåˆ©", "å‰è¾¾è”åˆ", "å‰è¾¾å›½æ°‘", "è¾¾é©¬å…‹", "è´¹å“ˆ", "å¸ƒèµ–ä»£åˆä½œ", "å¡ææ³•", "é˜¿å°”è‰¾åˆ©", "ç“¦èµ«è¾¾", "å“ˆæ£®å§†", "è‰¾ä¼¯å“ˆ"], 
                "æ²™ç‰¹ç”²": ["å“ˆæ³½å§†", "è‰¾å°”æ³•ç‰¹", "è‰¾å°”å¡å…¹", "è‰¾å°”æ³°", "è‰¾å°”å·´å»·", "è‰¾å°”é˜¿è¾¾å°”", "è‰¾å°”å¸ƒå‡¯é‡Œè€¶", "æ°è¾¾", "è‰¾å°”è¨èµ«å°”", "è‰¾å°”éœæ´›å¾·", "è‰¾å°”æ²™å·´å¸ƒ", "è‰¾å°”å¡è¿ªè¥¿äºš"], // T2
                "æ²™ç‰¹ä¹™": ["è‰¾å°”å‰å°”", "è‰¾å°”ç“¦å¦", "è‰¾å°”æœ±æ‹œå°”", "è‰¾å°”ç»æ‹‰", "è‰¾å°”è‹å…‹", "è‰¾å°”é‡Œäºšå¾·", "è‰¾å°”æ³½é©¬è±æ©", "è´¾å·´è±æ©", "è‰¾å°”å¡”ä¼Š", "è‰¾å°”è´¹è¨é‡Œ", "è‰¾å°”å“ˆå…¹å§†", "è‰¾å°”é‡Œäºšå¾·"], // T3
                
                // ä¸­å›½
                "ä¸­è¶…": ["ä¸Šæµ·ç”³èŠ±", "ä¸Šæµ·æµ·æ¸¯", "æˆéƒ½è“‰åŸ", "åŒ—äº¬å›½å®‰", "å±±ä¸œæ³°å±±", "æµ™æ±Ÿé˜Ÿ", "æ­¦æ±‰ä¸‰é•‡", "å¤©æ´¥æ´¥é—¨è™", "é•¿æ˜¥äºšæ³°", "æ²³å—é˜Ÿ", "é’å²›æµ·ç‰›", "æ²§å·é›„ç‹®", "æ¢…å·å®¢å®¶", "é’å²›è¥¿æµ·å²¸", "å—é€šæ”¯äº‘", "æ·±åœ³æ–°é¹åŸ"], 
                "ä¸­ç”²": ["å¹¿å·é˜Ÿ", "å¤§è¿è‹±åš", "äº‘å—ç‰æ˜†", "é’å²›çº¢ç‹®", "å¹¿è¥¿å¹³æœå“ˆå˜¹", "çŸ³å®¶åº„", "é»‘é¾™æ±Ÿå†°åŸ", "ä½›å±±å—ç‹®", "é‡åº†é“œæ¢é¾™", "æ±Ÿè¥¿è”ç››", "æµå—å…´æ´²", "æ— é”¡å´é’©"], // T2
                "ä¸­ä¹™": ["å¤§è¿å¤åŸ", "ä¸Šæµ·å˜‰å®šæ±‡é¾™", "æ³°å®‰å¤©è´¶", "å»ŠåŠè£è€€ä¹‹åŸ", "è¥¿å®‰è£æµ·", "åŒ—äº¬ç†å·¥", "æ—¥ç…§å®‡ä¸°", "æµ·å£ååŸ", "è¥¿å®‰æ³¾æ²³", "æ¹–åŒ—é’å¹´æ˜Ÿ", "ç»å…´æŸ¯æ¡¥è¶Šç”²", "é™•è¥¿è”åˆ"], // T3
                
                // æ—¥æœ¬/éŸ©å›½
                "Jè”èµ›": ["ç¥æˆ·èƒœåˆ©èˆ¹", "æ¨ªæ»¨æ°´æ‰‹", "å¹¿å²›ä¸‰ç®­", "ç”ºç”°æ³½ç»´äºš", "æµ¦å’Œçº¢é’»", "å¤§é˜ªé’¢å·´", "é¹¿å²›é¹¿è§’", "åå¤å±‹é²¸å…«", "å·å´å‰é”‹", "ç¦å†ˆé»„èœ‚", "æœ­å¹Œå†ˆè¨å¤š", "äº¬éƒ½ä¸æ­»é¸Ÿ", "æ¹˜å—æ¯”é©¬", "FCä¸œäº¬", "æŸå¤ªé˜³ç¥", "æ–°æ³»å¤©é¹…", "é¸Ÿæ –ç ‚å²©"], 
                "J2è”èµ›": ["æ¸…æ°´å¿ƒè·³", "ç£ç”°å–œæ‚¦", "åƒå¶å¸‚åŸ", "å¤§åˆ†ä¸‰ç¥", "æ¨ªæ»¨FC", "ä»™å°ç»´åŠ æ³°", "ä¸œäº¬ç»¿èŒµ", "å†ˆå±±ç»¿é›‰", "å¾·å²›æ¼©æ¶¡"], 
                "J3è”èµ›": ["FCä»Šæ²»", "æ¾æœ¬å±±é›…", "æ¨ªæ»¨ä½“è‚²", "ACé•¿é‡", "ç¦å²›è”", "é‡‘æ³½", "åŒ—ä¹å·å‘æ—¥è‘µ", "é¹¿å„¿å²›è”", "å…«æˆ·äº‘ç››", "FCå²é˜œ"], 
                "Kè”èµ›": ["è”šå±±HD", "æµ¦é¡¹é“äºº", "å…‰å·FC", "å…¨åŒ—ç°ä»£", "é¦–å°”FC", "ä»å·è”", "å¤§ç”°éŸ©äºšå¸‚æ°‘", "æµå·è”", "æ±ŸåŸFC", "æ°´åŸFC", "é‡‘æ³‰å°šæ­¦", "å¤§é‚±FC"], 
                "K2è”èµ›": ["é‡œå±±å¶åƒ", "é¦–å°”è¡£æ‹", "åº†å—FC", "å®‰å±±ç»¿äºº", "å¤©å®‰åŸFC", "å¿ å—ç‰™å±±", "åŸå—FC", "å¯Œå·1995", "é‡‘æµ¦FC"], 
                "K3è”èµ›": ["å¡å·å¸‚æ°‘", "é‡œå±±äº¤é€š", "è”šå±±å¸‚æ°‘", "é‡‘æµ·å¸‚å…", "æ±Ÿé™µå¸‚å…", "æ¸…å·FC", "æ¨å¹³FC", "ååŸFC", "å¹³æ³½è”åˆ"], 
                
                // æ¾³å¤§åˆ©äºš
                "æ¾³è¶…": ["æ‚‰å°¼FC", "å¢¨å°”æœ¬åŸ", "ä¸­å¤®æµ·å²¸æ°´æ‰‹", "è¥¿æ‚‰å°¼æ¼«æ­¥è€…", "é˜¿å¾·è±å¾·è”", "å¸ƒé‡Œæ–¯ç­ç‹®å¼", "ç€æ–¯å…‰è£", "æƒ çµé¡¿å‡¤å‡°", "çº½å¡æ–¯å°”å–·æ°”æœº"], 
                "æ¾³è”NPL": ["æ‚‰å°¼å¥¥æ—åŒ¹å…‹", "å¢¨å°”æœ¬éª‘å£«", "å¸ƒé‡Œæ–¯ç­ç‹®å¼Y", "ç€æ–¯SC", "é˜¿å¾·è±å¾·åŸ", "ååŸ¹æ‹‰å¥¥æ—åŒ¹å…‹", "é»‘é•‡åŸ", "é©¬å¯å°¼é›„ç‹®", "æµ·å¾·å ¡è”", "å¥¥å…‹åˆ©å¤§ç‚®"], // T2/T3 ä»£ç† (NPLä½“ç³»)

                // --- 6. å—ç¾è”èµ› (T1/T2) ---
                "å·´ç”²": ["å¼—æ‹‰é—¨æˆˆ", "å¸•å°”æ¢…æ‹‰æ–¯", "åšå¡”å¼—æˆˆ", "åœ£ä¿ç½—", "ç±³å†…ç½—ç«æŠ€", "æ ¼é›·ç±³å¥¥", "å¼—é²ç±³å«©å¡", "å…‹é²å¡ç½—", "ç§‘æ—è’‚å®‰", "ç“¦æ–¯ç§‘è¾¾ä¼½é©¬", "å·´ä¼Šäºš", "æˆˆäºšæ–¯", "åº“äºšå·´", "ç¦å¡”è±è¨", "å·´æ‹‰çº³ç«æŠ€", "å›½é™…é˜Ÿ"], 
                "å·´ä¹™": ["æ¡‘æ‰˜æ–¯", "æˆˆäºšå°¼æ©æ–¯", "ç§‘é‡Œè’‚å·´", "ç´¯è¥¿è…“ä½“è‚²", "ç±³å†…ç½—ç¾æ´²", "åºç‰¹æ™®é›·å¡”", "ç»´å¤šåˆ©äºš", "å¡é˜¿æ‹‰", "è¯ºç“¦é‡Œæ¡‘è’‚è¯º"], 
                "é˜¿ç”²": ["æ²³åºŠ", "é£“é£", "ç«æŠ€ä¿±ä¹éƒ¨", "åšå¡é’å¹´", "ç‹¬ç«‹é˜Ÿ", "åœ£æ´›ä¼¦ç´¢", "å¡”åˆ—é›·æ–¯", "çº½ç»´å°”è€ç”·å­©", "æ‹‰æ™®æ‹‰å¡”å¤§å­¦ç”Ÿ", "æ‹‰åŠªæ–¯", "ç­è²å°”å¾·", "å›¾åº“æ›¼ç«æŠ€", "æˆˆå¤šä¼Šå…‹é²æ–¯", "è´å°”æ ¼æ‹‰è¯º"], 
                "é˜¿ä¹™": ["åœ£é©¬ä¸åœ£èƒ¡å®‰", "ç±³ç‰¹é›·", "æŸ¥å¡é‡Œå¡”", "é˜¿å°”ç±³å…°ç‰¹", "åŸºå°”æ¢…æ–¯", "å¦ç€åˆ©", "è´å°”è±æ–¯", "åœ£é©¬ä¸å›¾åº“æ›¼"], 
                "å“¥ä¼¦ç”²": ["ç™¾ä¸‡å¯Œç¿", "å›½æ°‘ç«æŠ€", "å¡åˆ©ä½“è‚²", "ç‹¬ç«‹åœ£è²", "å·´å…°åŸºåˆ©äºšé’å¹´", "å¡å°”è¾¾æ–¯", "éº¦å¾·æ—ç‹¬ç«‹", "å¸•ç‰¹é‡Œå¥¥å¡”æ–¯", "é‡Œå¥¥å†…æ ¼ç½—"], 
                "æ™ºåˆ©ç”²": ["ç§‘æ´›ç§‘æ´›", "æ™ºåˆ©å¤§å­¦", "å¤©ä¸»æ•™å¤§å­¦", "å¥¥å¸Œé‡‘æ–¯", "è¥¿ç­ç‰™è”åˆ", "ç§‘é‡‘åšè”", "ç“¦å¥‡å·´æ‰˜", "å·´å‹’æ–¯å¦äºº", "åŠªå¸ƒä¼¦æ–¯"], 

                // --- 7. åŒ—ç¾è”èµ› (T1/T2/T3 å…¨è¦†ç›–) ---
                // ç¾å›½ (T1-T3)
                "ç¾èŒè”": ["å›½é™…è¿ˆé˜¿å¯†", "æ´›æ‰çŸ¶FC", "æ´›æ‰çŸ¶é“¶æ²³", "çº½çº¦åŸFC", "äºšç‰¹å…°å¤§è”", "è´¹åŸè”åˆ", "è¾›è¾›é‚£æFC", "æ³¢ç‰¹å…°ä¼æœ¨å·¥", "è¥¿é›…å›¾æµ·æ¹¾äºº", "å¤šä¼¦å¤šFC", "è’™ç‰¹åˆ©å°”å†²å‡»", "æ–°è‹±æ ¼å…°é©å‘½", "å¥¥æ–¯æ±€FC", "åœ£è·¯æ˜“æ–¯åŸ"], 
                "ç¾å† ": ["æŸ¥å°”æ–¯é¡¿ç‚®æ‰‹", "å‡¤å‡°åŸæ–°æ˜Ÿ", "è·¯æ˜“æ–¯ç»´å°”åŸ", "å¦å¸•æ¹¾æš´å¾’", "æ©™éƒ¡SC", "åŒ¹å…¹å ¡æ²³ç‹—", "è¨å…‹æ‹‰é—¨æ‰˜å…±å’Œ", "å¥¥å…‹å…°æ ¹", "åŸƒå°”å¸•ç´¢"], // T2 (USL Championship)
                "ç¾èŒè”1": ["æŸ¥å¡”åŠªåŠ ", "åŒ—å¡ç½—æ¥çº³FC", "é‡Œå£«æ»¡è¸¢çƒè€…", "æ ¼æ—ç»´å°”", "å­Ÿè²æ–¯901", "è±å…‹æ˜Ÿé¡¿", "å¤æ´›ç‰¹ç‹¬ç«‹"], // T3 (USL League One proxy)

                // å¢¨è¥¿å“¥ (T1-T3)
                "å¢¨è¶…": ["ç¾æ´²", "è’™ç‰¹é›·", "æåçº³", "è“åå­—", "è€è™å¤§å­¦", "ç“œè¾¾æ‹‰å“ˆæ‹‰", "æ™®åŸƒå¸ƒæ‹‰", "è±æ˜‚", "å¸•ä¸˜å¡", "æ¡‘æ‰˜æ–¯æ‹‰å¤çº³"], 
                "å¢¨å† ": ["åæ˜†", "æ°å¸•æ–¯", "å¡”å¸•è’‚å¥¥", "åœ£è·¯æ˜“æ–¯ç«æŠ€", "ç§‘é›·å¡ç±³è¯ºæ–¯", "å¡æ‹‰äºš", "äºšç‰¹å…°ç‰¹"], // T2 (Liga de ExpansiÃ³n MX)
                "å¢¨ä¸™": ["å¡”å¸•ä¸˜æ‹‰", "æ™®æ‹‰äºšç«æŠ€", "å¡æ‹‰äºš", "æ‹‰å¤çº³", "å¸Œæ›¼å¾·æ‹‰", "å…‹é›·å¡”ç½—äºŒé˜Ÿ", "å¸•ä¸˜å¡äºŒé˜Ÿ", "ç¾æ´²äºŒé˜Ÿ"], // T3 (Liga Premier)
            };
            
            const currentTeams = ref([]);

            // ç”Ÿæˆæ¯”åˆ†é€‰é¡¹
            const generateScores = () => {
                let options = [];
                for(let i=0; i<=5; i++) for(let j=0; j<=5; j++) options.push(`${i}:${j}`);
                options.push("èƒœå…¶ä»–", "å¹³å…¶ä»–", "è´Ÿå…¶ä»–");
                return options;
            };
            const scoreOptions = generateScores();

            // ç”Ÿæˆèµ”ç‡ 1.5 - 2.8
            const generateOdds = () => {
                let arr = [];
                for(let i=1.5; i<=2.81; i+=0.1) arr.push(i.toFixed(1));
                return arr;
            };
            const oddsRange = generateOdds();

            // è¡¨å•æ¨¡å‹
            const form = reactive({
                date: new Date().toISOString().split('T')[0], 
                league: "",
                homeTeam: "",
                awayTeam: "",
                halfScore: "0:0",
                fullScore: "0:0",
                handicap: "-1",
                upperOdds: "1.5",
                oddsChange: "" // æ–‡æœ¬è¾“å…¥
            });

            // 2. æ ¸å¿ƒé€»è¾‘æ–¹æ³•

            // â˜…â˜…â˜… å…¨å±€éªŒè¯ï¼šæ‰€æœ‰å­—æ®µå¿…é¡»æœ‰å€¼ â˜…â˜…â˜…
            const isFormValid = computed(() => {
                const requiredFields = [
                    form.date, 
                    form.league, 
                    form.homeTeam, 
                    form.awayTeam,
                    form.halfScore,
                    form.fullScore,
                    form.handicap,
                    form.upperOdds,
                    form.oddsChange
                ];

                return requiredFields.every(field => {
                    if (typeof field === 'string') {
                        return field.trim().length > 0;
                    }
                    return !!field;
                });
            });


            // å®æ—¶è¿‡æ»¤è”èµ›åˆ—è¡¨
            const filteredLeagues = computed(() => {
                const query = form.league.trim().toLowerCase();
                if (!query) return Object.keys(leagueData); 

                return Object.keys(leagueData).filter(league => 
                    league.toLowerCase().startsWith(query) || league.toLowerCase().includes(query)
                ).sort((a, b) => a.localeCompare(b, 'zh-Hans-CN', { sensitivity: 'base' })); 
            });

            // é€‰æ‹©ä¸€ä¸ªè”èµ›ï¼Œå¹¶éšè—ç»“æœåˆ—è¡¨
            const selectLeague = (leagueName) => {
                form.league = leagueName;
                showLeagueResults.value = false;
            };

            // å®‰å…¨éšè—ç»“æœåˆ—è¡¨
            const hideLeagueResultsSafely = () => {
                setTimeout(() => {
                    showLeagueResults.value = false;
                }, 150);
            };

            // åˆ¤æ–­è”èµ›æ˜¯å¦åœ¨å·²çŸ¥åˆ—è¡¨ä¸­
            const isKnownLeague = computed(() => {
                const league = form.league.trim().toLowerCase();
                return Object.keys(leagueData).some(key => key.toLowerCase() === league);
            });

            // ç›‘å¬ form.league å˜åŒ–ï¼ŒåŠ è½½å¯¹åº”çš„çƒé˜Ÿæ•°æ® (é˜²æŠ–åŠ¨ä¼˜åŒ–!)
            watch(() => form.league, (newLeague) => {
                // ç¡®ä¿åœ¨é€‰æ‹©æ–°è”èµ›æ—¶ï¼Œçƒé˜Ÿå­—æ®µè¢«æ¸…ç©ºï¼Œå¼ºåˆ¶ç”¨æˆ·é‡æ–°é€‰æ‹©
                form.homeTeam = "";
                form.awayTeam = "";

                clearTimeout(leagueWatchTimeout);
                
                leagueWatchTimeout = setTimeout(() => {
                    const trimmedLeague = newLeague.trim();
                    const knownKey = Object.keys(leagueData).find(key => key.toLowerCase() === trimmedLeague.toLowerCase());

                    if (knownKey) {
                        const teams = leagueData[knownKey] || [];
                        currentTeams.value = teams.sort((a, b) => a.localeCompare(b, 'zh-Hans-CN', { sensitivity: 'base' }));
                    } else {
                        currentTeams.value = [];
                    }
                }, 200); 
            }, { immediate: true }); 

            // è¾…åŠ©ï¼šè§£ææ¯”åˆ†å­—ç¬¦ä¸²
            const parseScore = (str) => {
                if (!str || str.includes("å…¶ä»–")) return null;
                const parts = str.split(':');
                if (parts.length !== 2) return null;
                return { h: parseInt(parts[0]), a: parseInt(parts[1]) };
            };

            // æ£€æŸ¥é‡å¤
            const isDuplicate = (newItem) => {
                return localData.value.some(item => 
                    item.league === newItem.league &&
                    item.homeTeam === newItem.homeTeam &&
                    item.awayTeam === newItem.awayTeam &&
                    item.halfScore === newItem.halfScore &&
                    item.fullScore === newItem.fullScore
                );
            };

            // å»é‡ä¾æ®
        function getUniqueKey(data) {
            return `${data.league}_${data.homeTeam}_${data.awayTeam}_${data.date}`;
        }
        
            // æ·»åŠ æ•°æ® (åŒ…å«æ‰€æœ‰æ ¡éªŒ)
            const addData = () => {
                // éªŒè¯ 1ï¼šå…¨å±€å¿…å¡«é¡¹æ£€æŸ¥
                if (!isFormValid.value) {
                    alert("ğŸš¨ ä¸¥é‡è­¦å‘Šï¼šè¯·ç¡®ä¿æ‰€æœ‰å¸¦æœ‰ (*) æ ‡è®°çš„è¾“å…¥é¡¹éƒ½å·²å¡«å†™å®Œæ•´ï¼");
                    return;
                }

                // éªŒè¯ 2ï¼šä¸»å®¢é˜Ÿä¸èƒ½ç›¸åŒ
                if (form.homeTeam === form.awayTeam) {
                    alert("é”™è¯¯ï¼šä¸»é˜Ÿå’Œå®¢é˜Ÿä¸èƒ½æ˜¯åŒä¸€æ”¯çƒé˜Ÿï¼");
                    return;
                }

                // éªŒè¯ 3ï¼šå…¨åœºæ¯”åˆ†å¿…é¡» >= åŠåœºæ¯”åˆ†
                const ht = parseScore(form.halfScore);
                const ft = parseScore(form.fullScore);
                
                if (ht && ft) {
                    if (ft.h < ht.h || ft.a < ht.a) {
                        alert(`é”™è¯¯ï¼šå…¨åœºæ¯”åˆ†(${form.fullScore}) ä¸èƒ½å°äº åŠåœºæ¯”åˆ†(${form.halfScore})ï¼Œé€»è¾‘ä¸ç¬¦ï¼`);
                        return;
                    }
                }

                const newItem = { ...form };

                // éªŒè¯ 4ï¼šå»é‡æ ¡éªŒ
                if (isDuplicate(newItem)) {
                    alert("æç¤ºï¼šæœ¬åœ°å·²æœ‰å®Œå…¨ç›¸åŒçš„ä¸€æ¡æ•°æ®ï¼Œæ— æ³•é‡å¤æ·»åŠ ï¼");
                    return;
                }

                localData.value.unshift(newItem);
                saveToLocal();
            };

            // æ¸…ç©ºåŠŸèƒ½
            const clearLocalData = () => {
                if (localData.value.length === 0) return;
                if (confirm("âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰æœ¬åœ°å­˜å‚¨çš„æ•°æ®å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼")) {
                    localData.value = [];
                    saveToLocal();
                    alert("æœ¬åœ°æ•°æ®å·²å…¨éƒ¨æ¸…ç©ºã€‚");
                }
            };

            // åˆ é™¤å•æ¡
            const deleteItem = (itemToDelete) => {
                if(confirm("ç¡®å®šåˆ é™¤è¿™æ¡æ•°æ®å—ï¼Ÿ")) {
                    localData.value = localData.value.filter(item => item !== itemToDelete);
                    saveToLocal();
                    alert("åˆ é™¤æˆåŠŸ");
                }
            };

            // å¯¼å‡º CSV
            const exportCSV = () => {
                if (localData.value.length === 0) {
                    alert("æç¤ºï¼šæœ¬åœ°æ²¡æœ‰æ•°æ®å¯å¯¼å‡º");
                    return;
                }
                let csvContent = "data:text/csv;charset=utf-8,\uFEFF"; 
                csvContent += "æ—¥æœŸ,èµ›äº‹,ä¸»é˜Ÿ,å®¢é˜Ÿ,åŠåœº,å…¨åœº,è®©çƒ,ä¸Šç›˜èµ”ç‡,èµ”ç‡å˜åŒ–\n"; // æ›´æ”¹è¡¨å¤´ 'è”èµ›' ä¸º 'èµ›äº‹'

                localData.value.forEach(row => {
                    let rowStr = `${row.date},${row.league},${row.homeTeam},${row.awayTeam},${row.halfScore},${row.fullScore},${row.handicap},${row.upperOdds},${row.oddsChange}`;
                    csvContent += rowStr + "\n";
                });

                const encodedUri = encodeURI(csvContent);
                const link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", `football_data_complete_search_${new Date().getTime()}.csv`);
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                alert("å¯¼å‡ºæˆåŠŸï¼");
            };

            // åœ¨æ‚¨çš„ Vue setup() å‡½æ•°å†…éƒ¨ï¼Œæ›¿æ¢æ‰åŸæ¥çš„ uploadToCloud å’Œ downloadFromCloudï¼š

const uploadToCloud = () => {
    // æ£€æŸ¥ Firebase å¼•ç”¨æ˜¯å¦å¯ç”¨
    if (!dbRef) { 
        alert("äº‘ç«¯åŠŸèƒ½æœªåˆå§‹åŒ–ï¼è¯·æ£€æŸ¥é¡¶éƒ¨ dbRef å˜é‡æ˜¯å¦å·²æ­£ç¡®é…ç½®ã€‚"); 
        return; 
    }
    // æ£€æŸ¥ç½‘ç»œçŠ¶æ€
    if (!navigator.onLine) { 
        alert("å½“å‰ç¦»çº¿ï¼Œæ— æ³•ä¸Šä¼ ï¼"); 
        return; 
    }

    // ä» Vue çš„å“åº”å¼æ•°æ®ä¸­è·å–æœ¬åœ°æ•°æ® (ä¸å†éœ€è¦ä» localStorage è¯»å–)
    // localData.value æ˜¯æ‚¨çš„ Vue å“åº”å¼æ•°æ®åˆ—è¡¨
    const dataToUpload = localData.value || []; 
    if (dataToUpload.length === 0) { 
        alert("æœ¬åœ°æ— æ•°æ®å¯ä¸Šä¼ ï¼"); 
        return; 
    }

    // A. ä»äº‘ç«¯è·å–å½“å‰æ•°æ®
    dbRef.once('value', snapshot => {
        const cloudData = snapshot.val() || {};
        const cloudKeys = new Set();
        let currentUploadCount = 0;
        
        // 1. ç”Ÿæˆäº‘ç«¯æ•°æ®çš„å”¯ä¸€é”®é›†åˆ
        Object.values(cloudData).forEach(item => {
            // ç¡®ä¿æ•°æ®ç»“æ„å®Œæ•´æ€§æ£€æŸ¥
            if (item.date && item.league && item.homeTeam && item.awayTeam) {
                cloudKeys.add(getUniqueKey(item));
            }
        });

        const uploadBatch = {};
        
        // 2. ç­›é€‰éœ€è¦ä¸Šä¼ çš„æ–°æ•°æ®
        dataToUpload.forEach(item => {
            const itemKey = getUniqueKey(item);
            if (!cloudKeys.has(itemKey)) {
                // Firebase .push() ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€é”®
                const newKey = dbRef.push().key; 
                uploadBatch[newKey] = item;
                currentUploadCount++;
            }
        });
        
        const duplicateCount = dataToUpload.length - currentUploadCount;

        if (currentUploadCount === 0) {
            alert(`æœ¬åœ°æ•°æ®å·²ä¸äº‘ç«¯åŒæ­¥ï¼Œæœ¬æ¬¡æ“ä½œå…±å¿½ç•¥ ${duplicateCount} æ¡é‡å¤æ•°æ®ã€‚`);
            return;
        }

        // 3. æ‰¹é‡ä¸Šä¼ æ–°æ•°æ®
        dbRef.update(uploadBatch)
            .then(() => {
                alert(`âœ… ä¸Šä¼ æˆåŠŸï¼å‘äº‘ç«¯æ·»åŠ  ${currentUploadCount} æ¡æ–°æ•°æ®ï¼Œå¿½ç•¥ ${duplicateCount} æ¡é‡å¤æ•°æ®ã€‚`);
            })
            .catch(err => alert("âŒ ä¸Šä¼ å¤±è´¥ï¼š" + err.message));
            
    });
}

const downloadFromCloud = () => {
    if (!dbRef) { 
        alert("äº‘ç«¯åŠŸèƒ½æœªåˆå§‹åŒ–ï¼è¯·æ£€æŸ¥é¡¶éƒ¨ dbRef å˜é‡æ˜¯å¦å·²æ­£ç¡®é…ç½®ã€‚"); 
        return; 
    }
    if (!navigator.onLine) { 
        alert("å½“å‰ç¦»çº¿ï¼Œæ— æ³•ä¸‹è½½ï¼"); 
        return; 
    }

    if (!confirm("ç¡®å®šä¸‹è½½äº‘ç«¯æ•°æ®ï¼Ÿæœ¬åœ°æ•°æ®å°†ä¸äº‘ç«¯å»é‡åˆå¹¶ã€‚")) return;

    dbRef.once('value', snapshot => {
        const cloudData = snapshot.val() || {};
        // å°† Firebase å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„
        const cloudList = Object.values(cloudData); 

        if (cloudList.length === 0) { 
            alert("äº‘ç«¯æ— æœ‰æ•ˆæ•°æ®ï¼"); 
            return; 
        }

        // è·å–æœ¬åœ°æ•°æ®çš„å”¯ä¸€é”®é›†åˆï¼ˆä½¿ç”¨ Vue å“åº”å¼æ•°æ® localData.valueï¼‰
        const localKeys = new Set(localData.value.map(item => getUniqueKey(item)));
        
        let addedCount = 0;
        let duplicateCount = 0;
        
        // ç­›é€‰éœ€è¦æ·»åŠ åˆ°æœ¬åœ°çš„æ–°æ•°æ®
        cloudList.forEach(item => {
            const itemKey = getUniqueKey(item);
            if (!localKeys.has(itemKey)) {
                localData.value.unshift(item); // ç›´æ¥ä¿®æ”¹ Vue å“åº”å¼æ•°æ®
                addedCount++;
            } else {
                duplicateCount++;
            }
        });

        if (addedCount === 0) {
            alert(`æœ¬åœ°å·²åŒ…å«äº‘ç«¯æ‰€æœ‰æ•°æ®ï¼Œå¿½ç•¥ ${duplicateCount} æ¡é‡å¤æ•°æ®ï¼Œæ— éœ€æ›´æ–°ã€‚`); 
            return;
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆå› ä¸º Vue æ•°æ®å·²æ›´æ–°ï¼Œåªéœ€è§¦å‘ä¿å­˜ï¼‰
        saveToLocal(); 
        
        // å‡è®¾æ‚¨åœ¨ setup ä¸­è¿”å›äº† localDataï¼Œè¡¨æ ¼ä¼šè‡ªåŠ¨æ›´æ–°
        alert(`â¬‡ ä¸‹å‘æˆåŠŸï¼æ–°å¢ ${addedCount} æ¡æ•°æ®è‡³æœ¬åœ°ï¼Œå¿½ç•¥ ${duplicateCount} æ¡é‡å¤æ•°æ®ã€‚æœ¬åœ°æ€»è®¡ ${localData.value.length} æ¡ã€‚`);

    }).catch(err => alert("âŒ ä¸‹å‘å¤±è´¥ï¼š" + err.message));
}

/*
// â˜…â˜…â˜… ä¸Šä¼ äº‘ç«¯ (æ›¿æ¢ä¸ºå®é™… Fetch è¯·æ±‚) â˜…â˜…â˜…
           const uploadToCloud = async () => {
    // ã€æ·»åŠ çš„å®‰å…¨æ£€æŸ¥ã€‘
    if (!cloudConfig || !cloudConfig.uploadUrl) {
        alert("ğŸš¨ ä¸¥é‡é…ç½®é”™è¯¯ï¼šäº‘é…ç½®å¯¹è±¡ (cloudConfig) æˆ–å…¶ä¸Šä¼  URL æœªå®šä¹‰ã€‚è¯·æ£€æŸ¥ setup() è¿”å›å€¼å’Œé…ç½®å®šä¹‰ã€‚");
        return;
    }

    const totalToUpload = localData.value.length;
    if(totalToUpload === 0) { 
        alert("æç¤ºï¼šæœ¬åœ°æ²¡æœ‰æ•°æ®å¯ä¸Šä¼ ã€‚"); 
        return; 
    }

                if (cloudConfig.uploadUrl.includes("your-cloud-service")) {
                    alert("ğŸš¨ è­¦å‘Šï¼šè¯·å…ˆåœ¨ cloudConfig ä¸­é…ç½®æ‚¨çš„ **çœŸå®ä¸Šä¼  URL**ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¤±è´¥ï¼");
                    return;
                }

                try {
                    const response = await fetch(cloudConfig.uploadUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            // æ¨èåœ¨å¤´éƒ¨å‘é€ API Key ä»¥ä¾¿æœåŠ¡å™¨éªŒè¯èº«ä»½
                            'X-API-Key': cloudConfig.apiKey 
                        },
                        // å‘é€æ•´ä¸ªæœ¬åœ°æ•°æ®é›†
                        body: JSON.stringify({ data: localData.value })
                    });

                    if (!response.ok) {
                        // ç½‘ç»œè¯·æ±‚æˆåŠŸï¼Œä½†æœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç  (å¦‚ 401, 404, 500)
                        throw new Error(`HTTP çŠ¶æ€ç é”™è¯¯: ${response.status} (${response.statusText})`);
                    }

                    // å‡è®¾æœåŠ¡å™¨è¿”å› JSON æ ¼å¼ï¼š { addedCount: X, duplicateCount: Y }
                    const result = await response.json(); 
                    
                    // æ˜¾ç¤ºæœåŠ¡å™¨è¿”å›çš„å®é™…ç»Ÿè®¡æ•°æ®
                    alert(`âœ… ä¸Šä¼ æˆåŠŸï¼æœ¬æ¬¡å…±åŒæ­¥ **${result.addedCount}** æ¡æ–°æ•°æ®è‡³äº‘ç«¯ï¼Œ**${result.duplicateCount}** æ¡ä¸ºäº‘ç«¯é‡å¤æ•°æ®ï¼ˆå·²å¿½ç•¥ï¼‰ã€‚\n\nè¯·æ³¨æ„ï¼šæ­¤å¤„çš„ç»Ÿè®¡æ•°æ®ç”±æ‚¨çš„æœåŠ¡å™¨è¿”å›ï¼Œç¡®ä¿æœåŠ¡å™¨è¿”å›æ ¼å¼æ­£ç¡®ã€‚`);

                } catch (error) {
                    // ç½‘ç»œè¯·æ±‚å¤±è´¥ã€CORS é”™è¯¯æˆ–ä»£ç æ‰§è¡Œé”™è¯¯
                    alert(`âŒ ä¸Šä¼ å¤±è´¥ï¼ç½‘ç»œæˆ–æœåŠ¡å™¨é”™è¯¯ã€‚\n\n**é”™è¯¯ä¿¡æ¯ï¼š** ${error.message}\n\n**å»ºè®®æ£€æŸ¥ï¼š**\n1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯ï¼Ÿ\n2. cloudConfig ä¸­çš„ URL å’Œ API Key æ˜¯å¦æ­£ç¡®ï¼Ÿ\n3. æ‚¨çš„äº‘ç«¯æœåŠ¡å™¨æ˜¯å¦å…è®¸ POST è¯·æ±‚ï¼Ÿ`);
                }
            };

            // â˜…â˜…â˜… äº‘ç«¯ä¸‹å‘ (æ›¿æ¢ä¸ºå®é™… Fetch è¯·æ±‚) â˜…â˜…â˜…
            const downloadFromCloud = async () => {
                if(!confirm("è­¦å‘Šï¼šè¿™å°†ä½¿ç”¨äº‘ç«¯æ•°æ®è¦†ç›–æœ¬åœ°æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šå—ï¼Ÿ")) return;

                if (cloudConfig.downloadUrl.includes("your-cloud-service")) {
                    alert("ğŸš¨ è­¦å‘Šï¼šè¯·å…ˆåœ¨ cloudConfig ä¸­é…ç½®æ‚¨çš„ **çœŸå®ä¸‹è½½ URL**ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¤±è´¥ï¼");
                    return;
                }

                try {
                    const response = await fetch(cloudConfig.downloadUrl, {
                        method: 'GET',
                        headers: {
                            'X-API-Key': cloudConfig.apiKey
                        }
                    });

                    if (!response.ok) {
                         // ç½‘ç»œè¯·æ±‚æˆåŠŸï¼Œä½†æœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç 
                        throw new Error(`HTTP çŠ¶æ€ç é”™è¯¯: ${response.status} (${response.statusText})`);
                    }

                    // å‡è®¾æœåŠ¡å™¨è¿”å›åŒ…å«æ•°æ®è®°å½•çš„æ•°ç»„ï¼š [ {date:..., league:...}, ... ]
                    const cloudData = await response.json();
                    
                    let addedCount = 0;
                    let duplicateCount = 0;
                    
                    // ä»…æ·»åŠ åœ¨æœ¬åœ°æ•°æ®ä¸­ä¸å­˜åœ¨çš„æ–°è®°å½• (æœ¬åœ°å»é‡é€»è¾‘)
                    cloudData.forEach(newItem => {
                        if (isDuplicate(newItem)) { // ä½¿ç”¨ç°æœ‰çš„ isDuplicate é€»è¾‘
                            duplicateCount++;
                        } else {
                            // ç¡®ä¿æ–°æ•°æ®ç¬¦åˆç»“æ„ï¼Œç„¶åæ·»åŠ 
                            localData.value.unshift(newItem); 
                            addedCount++;
                        }
                    });

                    saveToLocal();
                    
                    alert(`â¬‡ ä¸‹å‘æˆåŠŸï¼æœ¬æ¬¡å…±ä»äº‘ç«¯åŒæ­¥ **${cloudData.length}** æ¡æ•°æ®ï¼Œå…¶ä¸­ **${addedCount}** æ¡å·²æˆåŠŸæ·»åŠ è‡³æœ¬åœ°ï¼Œ**${duplicateCount}** æ¡ä¸ºæœ¬åœ°é‡å¤æ•°æ®ï¼ˆå·²å¿½ç•¥ï¼‰ã€‚`);

                } catch (error) {
                    alert(`âŒ ä¸‹å‘å¤±è´¥ï¼ç½‘ç»œæˆ–æœåŠ¡å™¨é”™è¯¯ã€‚\n\n**é”™è¯¯ä¿¡æ¯ï¼š** ${error.message}\n\n**å»ºè®®æ£€æŸ¥ï¼š**\n1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯ï¼Ÿ\n2. cloudConfig ä¸­çš„ URL å’Œ API Key æ˜¯å¦æ­£ç¡®ï¼Ÿ\n3. æ‚¨çš„äº‘ç«¯æœåŠ¡å™¨æ˜¯å¦å·²å¯åŠ¨å¹¶è¿”å›æ­£ç¡®çš„ JSON æ•°æ®ï¼Ÿ`);
                }
            };
            // â˜…â˜…â˜… å®é™…ç½‘ç»œè¯·æ±‚æ¨¡æ¿ç»“æŸ â˜…â˜…â˜…
*/
/*
             // 5. ä¸Šä¼ äº‘ç«¯ï¼ˆä¿ç•™æç¤ºï¼‰
        function uploadToCloud() {
            if (!dbRef) { alert("äº‘ç«¯åŠŸèƒ½æœªåˆå§‹åŒ–ï¼"); return; }
            if (!navigator.onLine) { alert("å½“å‰ç¦»çº¿ï¼Œæ— æ³•ä¸Šä¼ ï¼"); return; }

            const localData = JSON.parse(localStorage.getItem('matchData')) || [];
            if (localData.length === 0) { alert("æœ¬åœ°æ— æ•°æ®å¯ä¸Šä¼ ï¼"); return; }

            dbRef.once('value', snapshot => {
                const cloudData = snapshot.val() || {};
                const cloudKeys = new Set();

                Object.values(cloudData).forEach(item => {
                    if (item.date && item.league && item.homeTeam && item.awayTeam && item.halfScore && item.fullScore && item.handicap && item.upperOdds && item.oddsChange) {
                        cloudKeys.add(getUniqueKey(item));
                    }
                });

                const dataToUpload = localData.filter(item => !cloudKeys.has(getUniqueKey(item)));
                if (dataToUpload.length === 0) {
                    alert("æœ¬åœ°æ•°æ®ä¸äº‘ç«¯å·²åŒæ­¥ï¼Œæ— æ–°å¢æ•°æ®ï¼");
                    return;
                }

                const uploadObj = {};
                dataToUpload.forEach(item => {
                    const key = dbRef.push().key;
                    uploadObj[key] = item;
                });

                dbRef.update(uploadObj)
                    .then(() => alert(`ä¸Šä¼ æˆåŠŸï¼å‘äº‘ç«¯æ·»åŠ ${dataToUpload.length}æ¡æ–°æ•°æ®`))
                    .catch(err => alert("ä¸Šä¼ å¤±è´¥ï¼š" + err.message));
            });
        }

        // 6. ä¸‹è½½äº‘ç«¯ï¼ˆä¿ç•™æç¤ºï¼‰
        function downloadFromCloud() {
            if (!dbRef) { alert("äº‘ç«¯åŠŸèƒ½æœªåˆå§‹åŒ–ï¼"); return; }
            if (!navigator.onLine) { alert("å½“å‰ç¦»çº¿ï¼Œæ— æ³•ä¸‹è½½ï¼"); return; }

            if (!confirm("ç¡®å®šä¸‹è½½äº‘ç«¯æ•°æ®ï¼Ÿæœ¬åœ°æ•°æ®å°†ä¸äº‘ç«¯å»é‡åˆå¹¶ï¼ˆä¸è¦†ç›–ï¼‰")) return;

            dbRef.once('value', snapshot => {
                const cloudData = snapshot.val() || {};
                const cloudList = Object.values(cloudData).filter(item => 
                    item.league && item.homeTeam && item.awayTeam && item.date && item.id
                );

                if (cloudList.length === 0) { alert("äº‘ç«¯æ— æœ‰æ•ˆæ•°æ®ï¼"); return; }

                let localData = JSON.parse(localStorage.getItem('matchData')) || [];
                const localKeys = new Set(localData.map(item => getUniqueKey(item)));
                const dataToAdd = cloudList.filter(item => !localKeys.has(getUniqueKey(item)));

                if (dataToAdd.length === 0) {
                    alert("æœ¬åœ°å·²åŒ…å«äº‘ç«¯æ‰€æœ‰æ•°æ®ï¼Œæ— éœ€ä¸‹è½½ï¼"); return;
                }

                const mergedData = [...localData, ...dataToAdd];
                localStorage.setItem('matchData', JSON.stringify(mergedData));
                renderTable(mergedData);

                alert(`ä¸‹å‘æˆåŠŸï¼æ–°å¢${dataToAdd.length}æ¡æ•°æ®ï¼Œåˆå¹¶åå…±${mergedData.length}æ¡`);
            }).catch(err => alert("ä¸‹å‘å¤±è´¥ï¼š" + err.message));
        }
*/
/*
            // â˜… äº‘ç«¯åŠŸèƒ½ (ä½¿ç”¨ cloudConfig å ä½ç¬¦) â˜…
            const uploadToCloud = () => {
                if(localData.value.length === 0) { alert("æ²¡æœ‰æ•°æ®å¯ä¸Šä¼ "); return; }
                // å®é™…ä¸Šä¼ ä»£ç å°†ä½¿ç”¨ cloudConfig.apiKey å’Œ cloudConfig.uploadUrl
                setTimeout(() => alert("â¬† ä¸Šä¼ æˆåŠŸï¼(äº‘ç«¯å·²å»é‡æ·»åŠ )"), 500);
            };

            const downloadFromCloud = () => {
                if(!confirm("è­¦å‘Šï¼šè¿™å°†ä½¿ç”¨äº‘ç«¯æ•°æ®è¦†ç›–æœ¬åœ°æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šå—ï¼Ÿ")) return;
                // å®é™…ä¸‹è½½ä»£ç å°†ä½¿ç”¨ cloudConfig.apiKey å’Œ cloudConfig.downloadUrl
                setTimeout(() => {
                    alert("â¬‡ ä¸‹å‘æˆåŠŸï¼æœ¬åœ°æ•°æ®å·²è¦†ç›–æ›´æ–°ã€‚");
                    saveToLocal();
                }, 500);
            };
            // â˜… äº‘ç«¯åŠŸèƒ½ç»“æŸ â˜…


// â˜…â˜…â˜… ä¸Šä¼ äº‘ç«¯ (æ›¿æ¢ä¸ºå®é™… Fetch è¯·æ±‚) â˜…â˜…â˜…
            const uploadToCloud = async () => {
                const totalToUpload = localData.value.length;
                if(totalToUpload === 0) { 
                    alert("æç¤ºï¼šæœ¬åœ°æ²¡æœ‰æ•°æ®å¯ä¸Šä¼ ã€‚"); 
                    return; 
                }

                if (cloudConfig.uploadUrl.includes("your-cloud-service")) {
                    alert("ğŸš¨ è­¦å‘Šï¼šè¯·å…ˆåœ¨ cloudConfig ä¸­é…ç½®æ‚¨çš„ **çœŸå®ä¸Šä¼  URL**ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¤±è´¥ï¼");
                    return;
                }

                try {
                    const response = await fetch(cloudConfig.uploadUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            // æ¨èåœ¨å¤´éƒ¨å‘é€ API Key ä»¥ä¾¿æœåŠ¡å™¨éªŒè¯èº«ä»½
                            'X-API-Key': cloudConfig.apiKey 
                        },
                        // å‘é€æ•´ä¸ªæœ¬åœ°æ•°æ®é›†
                        body: JSON.stringify({ data: localData.value })
                    });

                    if (!response.ok) {
                        // ç½‘ç»œè¯·æ±‚æˆåŠŸï¼Œä½†æœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç  (å¦‚ 401, 404, 500)
                        throw new Error(`HTTP çŠ¶æ€ç é”™è¯¯: ${response.status} (${response.statusText})`);
                    }

                    // å‡è®¾æœåŠ¡å™¨è¿”å› JSON æ ¼å¼ï¼š { addedCount: X, duplicateCount: Y }
                    const result = await response.json(); 
                    
                    // æ˜¾ç¤ºæœåŠ¡å™¨è¿”å›çš„å®é™…ç»Ÿè®¡æ•°æ®
                    alert(`âœ… ä¸Šä¼ æˆåŠŸï¼æœ¬æ¬¡å…±åŒæ­¥ **${result.addedCount}** æ¡æ–°æ•°æ®è‡³äº‘ç«¯ï¼Œ**${result.duplicateCount}** æ¡ä¸ºäº‘ç«¯é‡å¤æ•°æ®ï¼ˆå·²å¿½ç•¥ï¼‰ã€‚\n\nè¯·æ³¨æ„ï¼šæ­¤å¤„çš„ç»Ÿè®¡æ•°æ®ç”±æ‚¨çš„æœåŠ¡å™¨è¿”å›ï¼Œç¡®ä¿æœåŠ¡å™¨è¿”å›æ ¼å¼æ­£ç¡®ã€‚`);

                } catch (error) {
                    // ç½‘ç»œè¯·æ±‚å¤±è´¥ã€CORS é”™è¯¯æˆ–ä»£ç æ‰§è¡Œé”™è¯¯
                    alert(`âŒ ä¸Šä¼ å¤±è´¥ï¼ç½‘ç»œæˆ–æœåŠ¡å™¨é”™è¯¯ã€‚\n\n**é”™è¯¯ä¿¡æ¯ï¼š** ${error.message}\n\n**å»ºè®®æ£€æŸ¥ï¼š**\n1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯ï¼Ÿ\n2. cloudConfig ä¸­çš„ URL å’Œ API Key æ˜¯å¦æ­£ç¡®ï¼Ÿ\n3. æ‚¨çš„äº‘ç«¯æœåŠ¡å™¨æ˜¯å¦å…è®¸ POST è¯·æ±‚ï¼Ÿ`);
                }
            };

            // â˜…â˜…â˜… äº‘ç«¯ä¸‹å‘ (æ›¿æ¢ä¸ºå®é™… Fetch è¯·æ±‚) â˜…â˜…â˜…
            const downloadFromCloud = async () => {
                if(!confirm("è­¦å‘Šï¼šè¿™å°†ä½¿ç”¨äº‘ç«¯æ•°æ®è¦†ç›–æœ¬åœ°æ‰€æœ‰æ•°æ®ï¼Œç¡®å®šå—ï¼Ÿ")) return;

                if (cloudConfig.downloadUrl.includes("your-cloud-service")) {
                    alert("ğŸš¨ è­¦å‘Šï¼šè¯·å…ˆåœ¨ cloudConfig ä¸­é…ç½®æ‚¨çš„ **çœŸå®ä¸‹è½½ URL**ï¼Œå¦åˆ™è¯·æ±‚ä¼šå¤±è´¥ï¼");
                    return;
                }

                try {
                    const response = await fetch(cloudConfig.downloadUrl, {
                        method: 'GET',
                        headers: {
                            'X-API-Key': cloudConfig.apiKey
                        }
                    });

                    if (!response.ok) {
                         // ç½‘ç»œè¯·æ±‚æˆåŠŸï¼Œä½†æœåŠ¡å™¨è¿”å›é”™è¯¯çŠ¶æ€ç 
                        throw new Error(`HTTP çŠ¶æ€ç é”™è¯¯: ${response.status} (${response.statusText})`);
                    }

                    // å‡è®¾æœåŠ¡å™¨è¿”å›åŒ…å«æ•°æ®è®°å½•çš„æ•°ç»„ï¼š [ {date:..., league:...}, ... ]
                    const cloudData = await response.json();
                    
                    let addedCount = 0;
                    let duplicateCount = 0;
                    
                    // ä»…æ·»åŠ åœ¨æœ¬åœ°æ•°æ®ä¸­ä¸å­˜åœ¨çš„æ–°è®°å½• (æœ¬åœ°å»é‡é€»è¾‘)
                    cloudData.forEach(newItem => {
                        if (isDuplicate(newItem)) { // ä½¿ç”¨ç°æœ‰çš„ isDuplicate é€»è¾‘
                            duplicateCount++;
                        } else {
                            // ç¡®ä¿æ–°æ•°æ®ç¬¦åˆç»“æ„ï¼Œç„¶åæ·»åŠ 
                            localData.value.unshift(newItem); 
                            addedCount++;
                        }
                    });

                    saveToLocal();
                    
                    alert(`â¬‡ ä¸‹å‘æˆåŠŸï¼æœ¬æ¬¡å…±ä»äº‘ç«¯åŒæ­¥ **${cloudData.length}** æ¡æ•°æ®ï¼Œå…¶ä¸­ **${addedCount}** æ¡å·²æˆåŠŸæ·»åŠ è‡³æœ¬åœ°ï¼Œ**${duplicateCount}** æ¡ä¸ºæœ¬åœ°é‡å¤æ•°æ®ï¼ˆå·²å¿½ç•¥ï¼‰ã€‚`);

                } catch (error) {
                    alert(`âŒ ä¸‹å‘å¤±è´¥ï¼ç½‘ç»œæˆ–æœåŠ¡å™¨é”™è¯¯ã€‚\n\n**é”™è¯¯ä¿¡æ¯ï¼š** ${error.message}\n\n**å»ºè®®æ£€æŸ¥ï¼š**\n1. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ CORS é”™è¯¯ï¼Ÿ\n2. cloudConfig ä¸­çš„ URL å’Œ API Key æ˜¯å¦æ­£ç¡®ï¼Ÿ\n3. æ‚¨çš„äº‘ç«¯æœåŠ¡å™¨æ˜¯å¦å·²å¯åŠ¨å¹¶è¿”å›æ­£ç¡®çš„ JSON æ•°æ®ï¼Ÿ`);
                }
            };
            // â˜…â˜…â˜… å®é™…ç½‘ç»œè¯·æ±‚æ¨¡æ¿ç»“æŸ â˜…â˜…â˜…
*/

            const saveToLocal = () => {
                localStorage.setItem('ye_football_complete_search', JSON.stringify(localData.value));
            };
            const loadFromLocal = () => {
                const saved = localStorage.getItem('ye_football_complete_search');
                if (saved) localData.value = JSON.parse(saved);
            };

            const filteredData = computed(() => {
                const query = searchQuery.value.trim();
                if (!query) return localData.value;

                const lowerQuery = query.toLowerCase();

                return localData.value.filter(item => {
                    if (item.upperOdds === query) {
                        return true;
                    }

                    if (lowerQuery.length >= 3) {
                        const lowerOddsChange = String(item.oddsChange).toLowerCase();
                        return lowerOddsChange.includes(lowerQuery);
                    }
                    
                    return false;
                });
            });

            onMounted(() => {
                loadFromLocal();
            });

            return {
                currentPage,
                form,
                leagueData,
                currentTeams,
                scoreOptions,
                oddsRange,
                localData,
                filteredData,
                searchQuery,
                addData,
                clearLocalData,
                deleteItem,
                exportCSV,
                uploadToCloud,
                downloadFromCloud,
                isKnownLeague,
                filteredLeagues,
                showLeagueResults,
                selectLeague,
                hideLeagueResultsSafely,
                isFormValid,
                cloudConfig
            };
        }
    }).mount('#app');
</script>

</body>
</html>